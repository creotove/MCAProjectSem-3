"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[467],{36467:function(e,r,s){s.r(r);var a=s(74165),t=s(15861),n=s(29439),l=s(72791),o=s(47022),c=s(28282),i=s(95313),d=s(2677),u=s(16157),m=s(59434),f=s(31243),h=s(80226),x=s(80184);r.default=function(){var e=(0,m.v9)((function(e){return e.user.user})),r=(0,l.useState)(""),s=(0,n.Z)(r,2),p=s[0],Z=s[1],g=(0,l.useState)(""),j=(0,n.Z)(g,2),v=j[0],b=j[1],N=(0,l.useState)(""),w=(0,n.Z)(N,2),y=w[0],C=w[1],P=(0,l.useState)(!0),k=(0,n.Z)(P,2),I=k[0],z=k[1],q=function(){var r=(0,t.Z)((0,a.Z)().mark((function r(){var s,t,n;return(0,a.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,e.uniqueId;case 3:return s=r.sent,r.next=6,f.Z.post("/api/v1/user/selfDataAccToTheirId",{uniqueId:s});case 6:(t=r.sent).data.success?(n=t.data.data.user,console.log(n),E(n.name),A(n.email),H(n.mobileNumber),K(n.address),X(t.data.data.profilePic)):h.ZP.error(t.data.message),r.next=14;break;case 10:r.prev=10,r.t0=r.catch(0),console.log(r.t0),h.ZP.error(r.t0.message);case 14:return r.prev=14,z(!1),r.finish(14);case 17:case"end":return r.stop()}}),r,null,[[0,10,14,17]])})));return function(){return r.apply(this,arguments)}}(),F=function(){var r=(0,t.Z)((0,a.Z)().mark((function r(){var s,t;return(0,a.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,v===y){r.next=4;break}return h.ZP.error("Password does not match"),r.abrupt("return");case 4:return r.next=6,e.uniqueId;case 6:return s=r.sent,r.next=9,f.Z.patch("/api/v1/user/changePassword",{uniqueId:s,password:p,newPassword:v});case 9:(t=r.sent).data.success?h.ZP.success(t.data.message):h.ZP.error(t.data.message),r.next=17;break;case 13:r.prev=13,r.t0=r.catch(0),console.log(r.t0),h.ZP.error(r.t0.message);case 17:case"end":return r.stop()}}),r,null,[[0,13]])})));return function(){return r.apply(this,arguments)}}();(0,l.useEffect)((function(){q()}),[]);var S=(0,l.useState)(e.name),_=(0,n.Z)(S,2),L=_[0],E=_[1],G=(0,l.useState)(e.email),D=(0,n.Z)(G,2),U=D[0],A=D[1],R=(0,l.useState)(),M=(0,n.Z)(R,2),B=M[0],H=M[1],T=(0,l.useState)(),V=(0,n.Z)(T,2),J=V[0],K=V[1],O=(0,l.useState)(),Q=(0,n.Z)(O,2),W=Q[0],X=Q[1],Y=function(){var r=(0,t.Z)((0,a.Z)().mark((function r(s){var t;return(0,a.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,s.preventDefault(),L&&U&&J){r.next=5;break}return h.ZP.error("Please fill all the fields"),r.abrupt("return");case 5:return t={uniqueId:e.uniqueId,profile:W,name:L,email:U,address:J},r.next=8,f.Z.post("/api/v1/user/uploadProfilePic",t);case 8:r.sent.data.success?(h.ZP.success("Profile Updated Successfully"),window.location.reload()):h.ZP.error("Profile Not Updated"),r.next=15;break;case 12:r.prev=12,r.t0=r.catch(0),console.log(r.t0);case 15:case"end":return r.stop()}}),r,null,[[0,12]])})));return function(e){return r.apply(this,arguments)}}();return I?(0,x.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,x.jsx)("div",{className:"spinner-border text-primary",role:"status",children:(0,x.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}):(0,x.jsxs)(o.Z,{fluid:!0,children:[(0,x.jsx)(o.Z,{children:(0,x.jsxs)("div",{className:"d-flex flex-column flex-md-row flex-lg-row ",children:[(0,x.jsx)(c.Z,{className:"col-12 col-md-7 col-lg-7 p-5 d-flex justify-content-center align-items-center my-2 my-md-0 my-lg-0",style:{backgroundColor:"#EDF0FF"},children:(0,x.jsxs)(o.Z,{fluid:!0,className:"d-flex justify-content-evenly align-items-center flex-column flex-md-row",children:[(0,x.jsx)("div",{className:"bg-black bg-opacity-25 rounded-circle",style:{height:"150px",width:"150px",overflow:"hidden"},children:(0,x.jsx)("img",{style:{height:"100%",width:"100%",objectFit:"cover"},src:W,alt:""})}),(0,x.jsxs)("div",{className:"",children:[(0,x.jsx)("div",{children:(0,x.jsxs)("div",{className:"d-flex ",children:[(0,x.jsx)("img",{src:"https://img.icons8.com/?size=256&id=83190&format=png",style:{height:"20px",width:"20px",marginRight:"10px",filter:"opacity(0.5)"},alt:"name"}),(0,x.jsx)("div",{className:"text-muted fs-6",children:e&&e.name})]})}),(0,x.jsx)("div",{children:(0,x.jsxs)("div",{className:"d-flex ",children:[(0,x.jsx)("img",{src:"https://img.icons8.com/?size=256&id=9730&format=png",style:{height:"20px",width:"20px",marginRight:"10px",filter:"opacity(0.5)"},alt:"phone number"}),(0,x.jsx)("div",{className:"text-muted fs-6",children:B})]})})]})]})}),(0,x.jsxs)(c.Z,{className:"col-12 col-md-4 offset-md-1 offset-lg-1 col-lg-4 border-1 border-dark rounded-4",children:[(0,x.jsx)(c.Z.Header,{className:"border-1 border-dark rounded-top-4",style:{backgroundColor:"#EDF0FF"},children:"Change Password"}),(0,x.jsx)(c.Z.Body,{children:(0,x.jsxs)(i.Z,{autoComplete:"off",children:[(0,x.jsxs)(i.Z.Group,{as:d.Z,className:"",controlId:"formPinCode",children:[(0,x.jsx)(i.Z.Label,{className:"fs-6",children:"Current Password"}),(0,x.jsx)(i.Z.Control,{type:"text",placeholder:"Current Password",size:"sm",onChange:function(e){return Z(e.target.value)},value:p,required:!0})]}),(0,x.jsxs)(i.Z.Group,{as:d.Z,className:"",controlId:"formPinCode",children:[(0,x.jsx)(i.Z.Label,{className:"fs-6",children:"New"}),(0,x.jsx)(i.Z.Control,{type:"text",placeholder:"New Password",size:"sm",onChange:function(e){return b(e.target.value)},value:v,required:!0})]}),(0,x.jsxs)(i.Z.Group,{as:d.Z,className:"",controlId:"formPinCode",children:[(0,x.jsx)(i.Z.Label,{className:"fs-6",children:"Confirm Password"}),(0,x.jsx)(i.Z.Control,{type:"text",placeholder:"Confirm Password",size:"sm",onChange:function(e){return C(e.target.value)},value:y,required:!0})]}),(0,x.jsx)(u.Z,{size:"sm mt-2 d-flex w-100 align-items-center justify-content-center",onClick:F,children:"Update Password"})]})})]})]})}),(0,x.jsx)(o.Z,{className:"mt-3",children:(0,x.jsxs)(c.Z,{className:"border-1 border-dark rounded-4",children:[(0,x.jsx)(c.Z.Header,{className:"border-1 border-dark rounded-top-4",style:{backgroundColor:"#EDF0FF"},children:"Profile Settings"}),(0,x.jsx)(c.Z.Body,{children:(0,x.jsxs)(i.Z,{className:"row",noValidate:!0,onSubmit:Y,children:[(0,x.jsxs)(i.Z.Group,{as:d.Z,className:"col-12 col-md-6 col-lg-6",controlId:"formName",children:[(0,x.jsx)(i.Z.Label,{className:"fs-6",children:"Name"}),(0,x.jsx)(i.Z.Control,{type:"text",placeholder:"Enter Name",size:"sm",onChange:function(e){return E(e.target.value)},value:L,required:!0})]}),(0,x.jsxs)(i.Z.Group,{as:d.Z,className:"col-12 col-md-6 col-lg-6",controlId:"formEmail",children:[(0,x.jsx)(i.Z.Label,{className:"fs-6",children:"Email"}),(0,x.jsx)(i.Z.Control,{type:"email",placeholder:"Email",size:"sm",onChange:function(e){return A(e.target.value)},value:U,required:!0})]}),(0,x.jsxs)(i.Z.Group,{as:d.Z,className:"col-12 col-md-6 col-lg-6",controlId:"formMobileNumberr",children:[(0,x.jsx)(i.Z.Label,{className:"fs-6",children:"Mobile Number"}),(0,x.jsx)(i.Z.Control,{type:"number",placeholder:"Mobile Number",size:"sm",onChange:function(e){return H(e.target.value)},value:B,disabled:!0})]}),(0,x.jsxs)(i.Z.Group,{as:d.Z,className:"col-12 col-md-6 col-lg-6",controlId:"formCity",children:[(0,x.jsx)(i.Z.Label,{className:"fs-6",children:"Address"}),(0,x.jsx)(i.Z.Control,{type:"text",placeholder:"Address",size:"sm",onChange:function(e){return K(e.target.value)},value:J,required:!0})]}),(0,x.jsxs)(i.Z.Group,{as:d.Z,className:"col-12 col-md-6 col-lg-6",controlId:"formImage",children:[(0,x.jsx)(i.Z.Label,{className:"fs-6",children:"Image"}),(0,x.jsx)(i.Z.Control,{type:"file",placeholder:"Image",size:"sm",onChange:function(e){return function(e){if(!(e.size>1e5))return console.log(e.size),new Promise((function(r,s){var a=new FileReader;a.readAsDataURL(e),a.onload=function(){r(a.result),X(a.result)},a.onerror=function(e){s(e)}}));h.ZP.error("File size cannot be more than 100kb")}(e.target.files[0])},required:!0})]}),(0,x.jsx)(o.Z,{children:(0,x.jsx)(u.Z,{size:"sm",type:"submit",className:"mt-2 d-flex ms-auto",children:"Update Profile"})})]})})]})})]})}}}]);
//# sourceMappingURL=467.987c3f78.chunk.js.map